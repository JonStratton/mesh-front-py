# Created by mesh-front-py
# Moved to /etc/network/interfaces

auto lo
iface lo inet loopback

{% for iface in ifaces if not iface.wireless_mode and iface.iface != 'bat0' %}
auto {{iface.iface}}
iface {{iface.iface}} inet {{iface.inet}}
{%if iface.address%}    address {{iface.address}}{% endif %}
{%if iface.netmask%}    netmask {{iface.netmask}}{% endif %}
{% endfor %}

{% for iface in ifaces if iface.wireless_mode %}
auto {{iface.iface}}
iface {{iface.iface}} inet {{iface.inet}}
{%if iface.wireless_mode%}    pre-up sleep 5{% endif %}
{%if iface.address%}    address {{iface.address}}{% endif %}
{%if iface.netmask%}    netmask {{iface.netmask}}{% endif %}
{%if iface.wireless_mode%}    wireless-mode {{iface.wireless_mode}}{% endif %}
{%if iface.wireless_channel%}    wireless-channel {{iface.wireless_channel}}{% endif %}
{%if iface.wireless_essid%}    wireless-essid {{iface.wireless_essid}}{% endif %}
{% endfor %}

{% for iface in ifaces if iface.iface == 'bat0' %}
auto {{iface.iface}}
iface {{iface.iface}} inet {{iface.inet}}
{% for mesh_interface in bat_mesh_interfaces %}    pre-up /usr/sbin/batctl if add {{mesh_interface}}
{% endfor %}
{%if bat_gw_mode%}    pre-up /usr/sbin/batctl gw_mode {{bat_gw_mode}}{% endif %}
{%if iface.address%}    address {{iface.address}}{% endif %}
{%if iface.netmask%}    netmask {{iface.netmask}}{% endif %}
{% endfor %}
